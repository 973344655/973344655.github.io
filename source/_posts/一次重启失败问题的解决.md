---
title: 一次linux启动失败问题的解决
date: 2019-09-24 15:21:39
tags: [others]
---

## 1.问题

下载了一个截屏软件，然后提示设置了一些东西，需要重启.
```
apt install flameshot
```
经试验，只这次出现了，在虚拟机中未需要设置并重启.具体原因未知.<br>

然后，重启，发现启动报错，进不了桌面.<br>

```
failed to start network manager
failed to start postgresql cluster 10-main
```

## 2.解决

重启，进入恢复模式,找到postgres路径,并尝试手动启动，看有什么问题
```
find / -name postgres
./postgres
```

报错
```
relocation error /usr/lib/x86_64-linux-gnu/libgnutls.so.30:
symbol _idn2_punycode_decode version IDN2_0.0.0 not defined in file libidn2.so.0 with link time reference
```

在网上找到该文件并尝试下载

````
wget http://ftp.us.debian.org/debian/pool/main/libi/libidn2/libidn2-0_2.0.5-1_amd64.deb
```

报和上面同样的错误<br>
此时猜测 failed to start network manager 已与此问题有关.<br>

重启,进入windows（双系统),下载该文件，复制到u盘<br>

重启，进入恢复模式<br>

查看u盘信息,并将文件得到
```
fdisk -l

//挂载
mount -t vfat /dev/sdb1 /media (如果fat32格式)
//mount -t nfs /dev/sdb1 /media (如果ntfs格式)

//然后拿出文件  
mv /media/libidn2-0_2.0.5-1_amd64.deb  /root
```

安装
```
dpkg -i libidn2-0_2.0.5-1_amd64.deb
```

重启，成功进入桌面，问题解决.<br>



总结，此问题应该不是是装flameshot导致的，而是其它某个apt update之类操作引发
