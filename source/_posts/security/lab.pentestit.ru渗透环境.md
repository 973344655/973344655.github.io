---
title: lab.pentestit.ru渗透环境链接
date: 2019-10-25 10:25:40
tags: [security]
---


之前在windows上下载过openvpn连接lab.pentestit.ru没成功，不知道是什么问题，就没管。今天想起来了，在linux上再尝试了一下，成功。

### 1.安装openvpn

```
apt install openvpn
```

安装成功后，会有/etc/openvpn文件夹，用存放配置文件

### 2.下载配置文件

在 https://lab.pentestit.ru/how-to-connect 下载 配置文件 ，放入/etc/openvpn/client下。

### 3.解决 No server certificate verification method has been enabled.

现在 直接启动
```
openvpn /etc/openvpn/client/lab.pentestit.ru.conf
```
会报 No server certificate verification method has been enabled. 问题，

解决:<br>
打开配置文件，在末尾加入一行

```
remote-cert-tls server
```

### 4.解决连接失败

现在再启动，会出现
```
Thu Oct 24 22:36:09 2019 TCP/UDP: Preserving recently used remote address: [AF_INET]91.121.71.57:443
Thu Oct 24 22:36:09 2019 Socket Buffers: R=[131072->131072] S=[16384->16384]
Thu Oct 24 22:36:09 2019 Attempting to establish TCP connection with [AF_INET]91.121.71.57:443 [nonblock]
Thu Oct 24 22:36:10 2019 TCP connection established with [AF_INET]91.121.71.57:443
Thu Oct 24 22:36:10 2019 TCP_CLIENT link local: (not bound)
Thu Oct 24 22:36:10 2019 TCP_CLIENT link remote: [AF_INET]91.121.71.57:443
Thu Oct 24 22:36:10 2019 Connection reset, restarting [-1]
Thu Oct 24 22:36:10 2019 SIGUSR1[soft,connection-reset] received, process restarting
Thu Oct 24 22:36:10 2019 Restart pause, 5 second(s)
^CThu Oct 24 22:36:12 2019 SIGINT[hard,init_instance] received, process exiting

```

之前就是在这里不知道是什么问题，后来突然想到我在本地局域网192.168.x.x下，该实验环境的vpn 也是192.168.101.1 会不会是这个原因。

测试，用代理启动：

```
proxychains openvpn /etc/openvpn/client/lab.pentestit.ru.conf

```

启动成功，成功ping 通 192.168.101.1

### 5.简单测试下

```
root@kali:~/Downloads# nmap 192.168.101.1/24
Starting Nmap 7.80 ( https://nmap.org ) at 2019-10-24 22:55 EDT
Nmap scan report for 192.168.101.1
Host is up (0.49s latency).
All 1000 scanned ports on 192.168.101.1 are filtered

Nmap scan report for 192.168.101.12
Host is up (0.45s latency).
Not shown: 996 filtered ports
PORT     STATE SERVICE
25/tcp   open  smtp
80/tcp   open  http
143/tcp  open  imap
8080/tcp open  http-proxy

Nmap scan report for 192.168.101.13
Host is up (0.41s latency).
All 1000 scanned ports on 192.168.101.13 are filtered

Nmap done: 256 IP addresses (3 hosts up) scanned in 145.16 seconds

```

看到192.168.101.12 有http

```
root@kali:~/Downloads# wget 192.168.101.12
--2019-10-24 23:14:04--  http://192.168.101.12/
Connecting to 192.168.101.12:80... connected.
HTTP request sent, awaiting response... 301 Moved Permanently
Location: http://site.test.lab [following]
--2019-10-24 23:14:04--  http://site.test.lab/
Resolving site.test.lab (site.test.lab)... failed: Name or service not known.
wget: unable to resolve host address ‘site.test.lab’

```

在/etc/hosts中添加一条
```
192.168.101.12 site.test.lab
```

再次wget,成功得到index.html


环境有了，后续测试，现在水平不够，知识积累不足，以后再说。渗透是纯业余爱好。
