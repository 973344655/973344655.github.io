---
title: 输入输出流
date: 2019-04-26 13:22:34
tags: [java]
---
### 一.整体概念
Java.io 包含几乎所有的java的输入输出类

先来一张 [菜鸟教程](http://www.runoob.com/java/java-files-io.html) 的图片<br>
![io](http://67.216.218.49:8000/file/blogs/java/io/iostream.png)

再来一张 [csdn](http://www.runoob.com/java/java-files-io.html) (推荐，写得很好)简化的图片<br>
![io2](http://67.216.218.49:8000/file/blogs/java/io/iostream2.png)

java中io流分字节流与字符流两种。

字符流:

Reader 和 Writer 为字符流抽象基类，提供基本抽象方法。<br>
InputStreamReader 和 OutputStreamWriter 为字符转换流，目的是将字节流转化为字符流。<br>
BufferdReader 和 BufferdWriter 字符缓冲流，高效的从字符流中读取文不。<br>
FileReader 和 FileWriter 为 InputStreamReader 和 OutputStreamWriter 的子类，特意用来读写文件。<br>

字节流:

InputStream 和 OutputStream 为字节流抽象基类，抽象基本方法。<br>
FileInputStream 和 FileOutputStream 为文件字节流，读写文件原始字节。<br>
BufferdInputStream 和 BufferdOutputStream 为字节缓冲流，利用缓冲区，提高读写效率。<br>

### 二.具体方法
#### 1.字符流

Reader:

```
public abstract class Reader implements Readable, Closeable {
    //将字符读入缓冲区
    public int read(java.nio.CharBuffer target)
    //读取字符(单个)
    public int read()
    //将字符读入数组
    public int read(char cbuf[])
    //将字符读入数组某个部分
    abstract public int read(char cbuf[], int off, int len)
    //跳过某些字符
    public long skip(long n)
    //是否准备好读取
    public boolean ready()
    //是否支持mark操作
    public boolean markSupported() {...}
    //mark
    public void mark(int readAheadLimit)
    //重置流
    public void reset()
    //关闭
    abstract public void close() throws IOException;
}
```

InputStreamReader:

```
public class InputStreamReader extends Reader {
    //构造方法,默认/字符集名称/字符集/字符集解码器
    public InputStreamReader(InputStream in)
    public InputStreamReader(InputStream in, String charsetName)
    public InputStreamReader(InputStream in, Charset cs)
    public InputStreamReader(InputStream in, CharsetDecoder dec)
    //扩展方法
    public String getEncoding()
}
```

BufferdReader:

```
public class BufferedReader extends Reader {
    //构造器，默认/自定义buffer大小
    public BufferedReader(Reader in)
    public BufferedReader(Reader in, int sz)
    //特有方法
    //确保流未被关闭
    private void ensureOpen()
    //读取一行
    public String readLine()
    //以流的形式返回一行
    public Stream<String> lines()
}
```

FileReader:

```
public class FileReader extends InputStreamReader {
    //构造方法
    public FileReader(String fileName)
    public FileReader(File file)
    public FileReader(FileDescriptor fd)
}
```

Writer:

```
public abstract class Writer implements Appendable, Closeable, Flushable {
    //写入单个字符
    public void write(int c)
    //写入数组内所有字符
    public void write(char cbuf[])
    //写入一部分
    abstract public void write(char cbuf[], int off, int len)
    //写字符串
    public void write(String str)
    public void write(String str, int off, int len)
    //追加字符序列
    public Writer append(CharSequence csq)
    public Writer append(CharSequence csq, int start, int end)
    //追究字符
    public Writer append(char c)
    //刷新整个流
    abstract public void flush()
    //关闭
    abstract public void close()
}
```

OutputStreamWriter:

```
public class OutputStreamWriter extends Writer {
    //构造方法，默认/字符集名/字符集/字符集编码器
    public OutputStreamWriter(OutputStream out)
    public OutputStreamWriter(OutputStream out, String charsetName)
    public OutputStreamWriter(OutputStream out, Charset cs)
    public OutputStreamWriter(OutputStream out, CharsetEncoder enc)
    //特有方法
    public String getEncoding()
    //刷新buffer
    void flushBuffer()
}
```

BufferdWriter:

```
public class BufferedWriter extends Writer {
    //构造器，默认大小/缓冲区大小
    public BufferedWriter(Writer out)
    public BufferedWriter(Writer out, int sz)
    //特有
    //换行
    public void newLine()
    //刷新缓冲区  
    void flushBuffer()
}
```

FileWriter:

```
public class FileWriter extends OutputStreamWriter{
    //构造器
    public FileWriter(String fileName)
    //是否追加的方式写入文件
    public FileWriter(String fileName, boolean append)
    public FileWriter(File file)
    public FileWriter(FileDescriptor fd)
}
```
#### 2.字节流
InputStream:

```
public abstract class InputStream implements Closeable {
    //从输入流中读取下一个字节byte
    public abstract int read()
    //从输入流中读取一定数量字节到数组中
    public int read(byte b[])
    //读取输入流中len个字节
    public int read(byte b[], int off, int len)
    //跳过
    public long skip(long n)
    //输入流是否可读取
    public int available()
    //关闭
    public void close()
    //是否支持reset方法
    public boolean markSupported()
}
```

FileInputStream:

```
class FileInputStream extends InputStream{
    //构造器
    public FileInputStream(String name)
    public FileInputStream(File file)
    public FileInputStream(FileDescriptor fdObj)
}
```

BufferdInputStream:

```
class BufferedInputStream extends FilterInputStream {
    //构造器
    public BufferedInputStream(InputStream in)
    public BufferedInputStream(InputStream in, int size)
}  
```

OutputStream:

```
public abstract class OutputStream implements Closeable, Flushable{
    //写入
    public abstract void write(int b)
    //将数组内的字符写入
    public void write(byte b[])
    //将数组内特定部分字符写入
    public void write(byte b[], int off, int len)
    //刷新
    public void flush()
    //关闭
    public void close()
}
```

FileOutputStream:

```
public class FileOutputStream extends OutputStream{
    //构造器
    public FileOutputStream(String name)
    public FileOutputStream(String name, boolean append)
    public FileOutputStream(File file)
    public FileOutputStream(File file, boolean append)
    public FileOutputStream(FileDescriptor fdObj)
}
```

BufferdOutputStream:

```
public class BufferedOutputStream extends FilterOutputStream {
    //构造器
    public BufferedOutputStream(OutputStream out)
    public BufferedOutputStream(OutputStream out, int size)
}
```
### 三.实际例子
读取socket发送过来的字节流

```
//1.客户端发过来的字节流 socket.getInputStream()
//2.字节流转为字符流 InputStreamReader()
//3.高效读写 BufferedReader()
BufferedReader in = new BufferedReader(new InputStreamReader(
socket.getInputStream()));
System.out.println(in.readLine());  // 打印
```

### 四.区别

https://comp.lang.java.help.narkive.com/dKrnNGj0/what-s-the-diff-printwriter-vs-outputstreamwriter
